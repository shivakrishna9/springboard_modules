!function(e){Drupal.behaviors.springboardForms={attach:function(a,t){!function(e){e.fn.clearEle=function(){return this.each(function(){e(this).removeClass("valid"),e(this).next("label").remove(),e(this).parents(".success").removeClass("success"),e(this).parents(".error").removeClass("error"),this.value=""})}}(jQuery),e(window).ready(function(){function a(){e("#quantity-total").empty();var a=e('input[type="radio"][name*="amount"]:checked:visible').val();if("other"==a&&(a=e('input[name*="other_amount"]').val()),isNaN(a)===!0)var t=0;else var t=e('select[name*="quantity"]').val()*a;e('select[name*="quantity"]').after('<span id="quantity-total">Total: '+Drupal.settings.fundraiser.currency.symbol+t+"</span>")}e('input[name*="card_number"], input[name*="card_cvv"]').attr("autocomplete","off"),e('select[name*="quantity"]').change(function(){a()}),e('input[name*="amount"]').change(function(){a()}),e('input[name*="other_amount"]').change(function(){a()}),e('input[name*="recurs_monthly"]').change(function(){a()}),e.validator.addMethod("creditcard",function(e,a){return this.optional(a)||/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/i.test(e)},"Enter a valid credit card number"),e.validator.addMethod("amount",function(e,a){return this.optional(a)||/^[0-9]*(\.\d{1,3})*(,\d{1,3})?$/i.test(e)},"Enter a valid amount"),e.validator.addMethod("zipcode",function(a,t){var n=e(':input[name*="[country]"]');return n.length&&"US"==n.val()?this.optional(t)||/(^\d{5}((-|\s)\d{4})?$)|(^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$)/i.test(a):!0},"Enter a valid zipcode");var t=e(".fundraiser-donation-form").validate({onkeyup:function(a,t){if(e(a).next(".error")[0]){if(9===t.which&&""===a.value)return;this.element(a)}},onfocusout:function(a){var t=e(a).valid();"undefined"!=typeof validateKeyCallback&&0==t?(window.validateKeyCallback.status=0,validateKeyCallback.error(a)):"undefined"!=typeof validateKeyCallback&&1==t&&(window.validateKeyCallback.status=1,validateKeyCallback.success(a))},highlight:function(a){e(a).addClass("key-validate"),e(a).closest(".control-group").removeClass("success").addClass("error")},success:function(a){e(a).text("OK").addClass("valid").closest(".control-group").removeClass("error").addClass("success")}});e(".fundraiser-donation-form :input.key-validate").bind("change keyup",function(){t.element("#"+e(this).attr("id"))}),e(".fundraiser-donation-form #edit-submit").once(function(){e(".fundraiser-donation-form #edit-submit").click(function(){t.form()&&(e(this).hide(),e(".fundraiser_submit_message").hide(),e(this).after('<div class="donation-processing-wrapper"><p class="donation-processing">Processing<span class="donation-processing-spinner"></span></p></div>'))})});for($key in Drupal.settings.fundraiser.js_validation_settings)e('input[name*="'+$key+'"]')[0]&&e('input[name*="'+$key+'"]').rules("add",Drupal.settings.fundraiser.js_validation_settings[$key]);e('input[name*="other_amount"]')[0]&&e('input[name*="other_amount"]').rules("add",{required:{depends:function(a){return e('input[type="radio"][name$="[amount]"][value="other"]:visible').is(":checked")?!0:!1}},amount:!0,min:parseFloat(Drupal.settings.fundraiserWebform.minimum_donation_amount),messages:{required:"This field is required",amount:"Enter a valid amount",min:"The amount entered is less than the minimum donation amount."}}),e('input[type="radio"][name*="[amount]"]').change(function(){"other"==e(this).val()?e('input[name*="[other_amount]"]').focus():e('input[name*="[other_amount]"]').clearEle()}),e('input[name*="[other_amount]"]').focus(function(){e('input[type="radio"][name*="[amount]"][value="other"]').attr("checked","checked")}),e('input[type="radio"][name*="[recurring_amount]"]').change(function(){"other"==e(this).val()?e('input[name*="[recurring_other_amount]"]').focus():e('input[name*="[recurring_other_amount]"]').clearEle()}),e('input[name*="[recurring_other_amount]"]').focus(function(){e('input[type="radio"][name*="[recurring_amount]"][value="other"]').attr("checked","checked")}),e('input[name*="other_amount"]').blur(function(){var t=this.value;if("undefined"==typeof window.customValidation){if(t.length>0&&this.value.match(/\d/g)){if(t.match(/\./)){t=t.replace(/[^\d\.]+/g,"").replace(/\./i,"-").replace(/\./g,"").replace("-",".").match(/\d+\.\d{0,2}|\.\d{0,2}/);var n=t[0];n.match(/\.\d{2}/)||(t+=n.match(/\.\d{1}/)?"0":"00")}else t=t.replace(/[^\d]+/g,"")+".00";this.value=t,a(),e(this).valid()}}else window.customValidation(t),e(this).valid()}),jQuery.extend(jQuery.validator.messages,{required:"This field is required",remote:"Please fix this field",email:"Enter a valid email address",url:"Enter a valid URL",date:"Enter a valid date",dateISO:"Enter a valid date (ISO)",number:"Must be a number",digits:"Enter only digits",creditcard:"Enter a valid credit card number",equalTo:"Enter the same value again",accept:"Enter a value with a valid extension",maxlength:jQuery.validator.format("Enter no more than {0} characters"),minlength:jQuery.validator.format("Enter at least {0} characters"),rangelength:jQuery.validator.format("Enter a value between {0} and {1} characters long"),range:jQuery.validator.format("Enter a value between {0} and {1}"),max:jQuery.validator.format("Enter a value less than or equal to {0}"),min:jQuery.validator.format("Enter a value greater than or equal to {0}")}),e("select").each(function(){e(this).next().is("select")&&e(this).next().addClass("spacer")}),e(".close").click(function(){e(this).closest(".alert").fadeOut()})})}}}(jQuery);